%=========================================%
% MTecknology's Resume/CV Style for LaTeX %
%-----------------------------------------%
% Source:  https://github.com/MTecknology/latex-resume
% Author:  Michael Lustfield
% Version: UNRELEASED
% License: CC-BY-4
% - https://creativecommons.org/licenses/by/4.0/legalcode.txt
%=========================================%

%--------------%
% Dependencies %
%--------------%

% Required packages
\usepackage[empty]{fullpage}
\usepackage{calc}
\usepackage{changepage}
\usepackage{expl3}
\usepackage{titlesec}
\usepackage{enumitem}
\usepackage{fancyhdr}
\usepackage{fontawesome5}
\usepackage{hyperref}
\usepackage{multicol}
\usepackage{bookmark}
\usepackage{lastpage}  % Requires second build!
\usepackage{needspace}
\usepackage[ua]{pdfx}
\usepackage{xcolor}
\usepackage{xspace}

% Improved underlines
% Features: https://texdoc.org/serve/ulem/0
\usepackage[normalem]{ulem}

%------------------%
% Basic Page Setup %
%------------------%

% UTF-8 Encoding
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

% Font: Sans-Serif
%\usepackage[sfdefault]{FiraSans}
%\usepackage[sfdefault]{roboto}
%\usepackage[sfdefault]{noto-sans}
%\usepackage[default]{sourcesanspro}

% Font: Serif
\usepackage{CormorantGaramond}
\usepackage{charter}

% Colors
% Use with \color{Color-Name}
\definecolor{Title}{HTML}{0e6e55}
\definecolor{Heading}{HTML}{0e6e55}
\definecolor{HRule}{HTML}{a16f0b}
\definecolor{Callout}{HTML}{b50013}

% Default bullet used in itemized lists
\renewcommand\labelitemi{--}

%---------------------%
% Advanced Page Setup %
%---------------------%

% Misc. Options
\pagestyle{fancy}
\fancyhf{}
\fancyfoot{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\urlstyle{same}

% Adjust Margins
\usepackage[
  left=0.35in,
  right=0.35in,
  top=0.30in,
  bottom=0.30in,
  headheight=0pt,
  headsep=0pt,
  footskip=0.4em
]{geometry}
\setlength{\multicolsep}{-3.0pt}
\setlength{\columnsep}{-1pt}
\setlength{\tabcolsep}{0pt}
\raggedbottom
\raggedright

% ATS Readability
\input{glyphtounicode}
\pdfgentounicode=1

% Reset Link Border
\hypersetup{
  pdfborder={0 0 0},
  pdfinfo={
    % Theme Documentation (not rendered)
    Contributor=MTecknology,
    Source=https://mtecknology.github.io/latex-resume/,
  }}

%--------------------%
% Convenient Aliases %
%--------------------%

% Font: Bold
\newcommand{\B}[1]{\textbf{#1}}

% Font: Italic
\newcommand{\It}[1]{\textit{#1}}

% Font: Bold + Italic
\newcommand{\BIt}[1]{\textbf{\textit{#1}}}

% Font: Underline
\newcommand{\U}[1]{\uline{#1}}

% Tab (between \quad and \qquad)
\newcommand{\tab}[0]{\hspace{1.5em}}

% Feature: Creates a "paragraph" of text,
% intended to fit below sections and headings
% Use with \p{Some Text}
\newcommand{\p}[1]{
  \vspace{0.5em}
  \begin{adjustwidth}{1.5em}{1.5em}
    #1
  \end{adjustwidth}
  \vspace{-0.25em}
}

% Feature: Creates a "paragraph" of text with a leading tab
% Use with \pTab{Some Long Text}
\newcommand{\pTab}[1]{\p{\tab#1}}

% Feature: Mini spacer, that ensures ATS sees full separation
% User with Foo \spacer Fuz
\newcommand{\Spacer}[0]{\xspace~ --- ~\xspace}

% Feature: Smaller spacer, that allows tighter word cramming
% User with Foo \pipe Fuz
\newcommand{\spacer}[0]{\xspace~ $|$ ~\xspace}

%------------------%
% Special Features %
%------------------%

% Simple wrapper to set up page numbering
% Usage: \numberedPages{label}{page_separator}
% Example: \numberedPages{My Resume, Page }{ of }
% WARNING: Must run pdflatex twice!
\newcommand{\numberedPages}[2]{
  \documentFooter{\hspace{1in}#1\thepage#2\pageref{LastPage}}
}

% Feature: Redact Text
% Toggle between two versions of text
% Usage: \redaction{Redacted Text}{Private Text}
% Toggle with \redacttrue or \redactfalse
\newcommand{\redaction}[2]{
  \ifredact
    #1% Show redaction text when \redact is true
  \else
    #2% Show real text when \redact is false
  \fi
}

% Feature: ATS Heading (HACK)
% Insert a hidden white dot (.) if first element on page
\newcommand{\atsBreak}[0]{\ifdim\pagetotal=0pt{\color{white}\hspace{-0.2em}.}\fi}

% Create a boolean variable named redact
\newif\ifredact

% Default to show real text (do not redact)
\redactfalse

%-------------%
% Page Titles %
%-------------%

% Feature: Centered title along with "subtitle" between HR
% Usage: \documentTitle{Person Name}{Contact Details}
\newcommand{\documentTitle}[2]{
  \hypersetup{pdfinfo={
    Owner=#1, Author=#1,
    Subject=#1 CV/Resume,
  }}
  \begin{center}
    {\Huge\color{Title}\textbf{\MakeUppercase{#1}}}
    \vspace{0.5em}
    {\color{HRule} \hrule}
    \vspace{-2pt}
    \footnotesize{#2}
    \vspace{2pt}
    {\color{HRule} \hrule}
  \end{center}
}

% Feature: Second version of documentTitle, designed for dual use
% Usage: \documentTitleTwo{Target Title}{Keywords}
\ExplSyntaxOn
\newcommand{\documentTitleTwo}[2]{
  % Convert to string and strip macros
  \str_set:Ne \l_tmpa_str {\text_purify:n {#2}}
  % Remove $ from spacer
  \str_replace_all:Nnn \l_tmpa_str{$}{}
  \hypersetup{pdfinfo={
    Title=#1,
    Keywords={\str_use:N \l_tmpa_str},
  }}
  \begin{center}
    {\Large\color{Title} #1}
    \vspace{0.5em}
    {\color{HRule} \hrule}
    \vspace{-2pt}
    \footnotesize{#2}
    \vspace{2pt}
    {\color{HRule} \hrule}
  \end{center}
}
\ExplSyntaxOff

%------------------------%
% Headings / Subheadings %
%------------------------%

% Feature: Section heading with horizontal rule
% Usage: \section{Title}
% Reference: \titleformat{<command>}[<shape>]
%   {<format>}{<label>}{<sep>}{<before-code>}[<after-code>]
\titleformat{\section}
  {\raggedright\color{Heading}\large\bfseries}
  {}
  {0em}
  {\atsBreak\MakeUppercase}
  [\color{HRule}\titlerule]

% Adjust space around section headings
% Reference: \titlespacing{command}{left}{before-sep}{after-sep}[right-sep]
\titlespacing*{\section}{0pt}{1.0em}{0.75em}

% Feature: Section heading with separator and content on same line
% Usage: \tinysection{Title}
\newcommand{\tinysection}[1]{
  \phantomsection
  \addcontentsline{toc}{section}{#1}
  \noindent{\large\bfseries\color{Heading}\MakeUppercase{#1}} {\color{HRule} ---}
}

% Feature: Repurposed \heading, used for simplified work experience
% Usage: \experience{Company}{Role}{Presence}{Dates}
\newcommand{\experience}[4]{
  \hspace{1em}#1 -- \textbf{#2}\hfill\textit{#3}
  \ifx#3\else ~ $|$ \fi
  \makebox[6.7em][l]{~#4}\\
}

% Feature: Indented line with arguments left/right aligned in document
% Usage: \heading{Left}{Right}
\newcommand{\heading}[2]{
  \needspace{7em}
  \atsBreak{\large\hspace{1em}#1\hfill#2}\\
}

%------------------------%
% Variations of \heading %
%------------------------%

% Same as \heading with bold font
\newcommand{\headingBf}[2]{
  \heading{\textbf{#1}}{\textbf{#2}}
}

% Same as \heading with italic font
\newcommand{\headingIt}[2]{
  \heading{\textit{#1}}{\textit{#2}}
}

% Same as \heading without suggested page break
\newcommand{\subhead}[2]{
  {\large\hspace{1em}#1\hfill#2}\\
}

% Same as \subhead with bold font
\newcommand{\subheadBf}[2]{
  \subhead{\textbf{#1}}{\textbf{#2}}
}

% Same as \heading with italic font
\newcommand{\subheadIt}[2]{
  \subhead{\textit{#1}}{\textit{#2}}
}

%-----------------------%
% Lists / List Headings %
%-----------------------%

% Feature: Template for itemized lists
% Usage: \begin{resume_list} [items] \end{resume_list}
\newenvironment{resume_list}{
  \needspace{5em}\vspace{-0.25em}
  \begin{itemize}
    \setlength{\itemsep}{-0.5em}
    \setlength{\leftmargin}{2.0em}
}{
  \end{itemize}
}

% Feature: Formats an item to use as an itemized title
% Usage: \itemTitle{Text:}
% Note: Use ':' or similar to prevent ATS seeing this as a heading
\newcommand{\itemTitle}[1]{
  \needspace{4em}
  \item[] \uline{#1}
}

% Feature: Alternative display of \itemTitle
% Usage: \itemHeading{Text:}
% Note: Use ':' or similar to prevent ATS seeing this as a heading
\newcommand{\itemHeading}[1]{
  \needspace{4em}
  \vspace{0.25em}
  \item[] \textbf{#1}
}

%--------------------%
% Auxiliary Features %
%--------------------%

% Feature: Create a footer with correct padding
% Usage: \documentFooter{\thepage of X}
\newcommand{\documentFooter}[1]{
  \setlength{\footskip}{2em}
  \addtolength{\textheight}{-2em}
  \fancyfoot[C]{\footnotesize #1}
}
